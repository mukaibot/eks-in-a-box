#!/usr/bin/ruby
$LOAD_PATH << 'lib'
PLATFORM = `uname`.chomp.downcase
require 'optparse'
require 'commands/create'

options = {}

OptionParser.new do |opts|
  opts.banner = "Usage: eks-box [options]"

  opts.on("-oOPERATION", "--operation=OPERATION", "Operation to perform. Valid operations are 'generate', 'create', 'update'") do |o|
    options[:operation] = o
  end

  opts.on("-cCONFIG", "--config=CONFIG", "Configuration file") do |c|
    options[:config] = c
  end

  opts.on("-h", "--help", "Prints this help") do
    puts opts
    exit
  end
end.parse!

abort "Not sure what I should do. Run eks-box --help" if options.empty?

Commands::Create.call if options.dig(:operation) == 'create'
